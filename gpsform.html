<script type="text/javascript"> 

function getLocationConstant()
{
	if(navigator.geolocation)
	{
		navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError);  
	} else {
		alert("Your browser or device doesn't support Geolocation");
	}
}

// If we have a successful location update
function onGeoSuccess(event)
{
	document.getElementById("Latitude").value =  event.coords.latitude; 
	document.getElementById("Longitude").value = event.coords.longitude;
	document.getElementById("Scan").value = get['scan'];
}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
	alert("Error code " + event.code + ". " + event.message);
}

function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

    for(var i = 0; i < hashes.length; i++)
        {
         hash = hashes[i].split('=');
         vars.push(hash[0]);
         vars[hash[0]] = hash[1];
         }
     return vars;
}

var get = getUrlVars();

</script>
<body onload="getUrlVars()">
<br><br>
<form action="gps2.cfm" method="post">
	Scan: <input type="text" id="Scan" name="Scan" value="">
	<br><br>
	Latitude: <input type="text" id="Latitude" name="Latitude" value="">
	<br><br>
	Longitude: <input type="text" id="Longitude" name="Longitude" value="">
	<br><br>
	<input type="button" value="Get Location" onclick="getLocationConstant()"/>
	<br><br>
	<input type="submit" value="Add GPS Location" class=small>
</form>
</body>